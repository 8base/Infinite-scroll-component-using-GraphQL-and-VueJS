{"remainingRequest":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sebastian/Code/8base/tutorials/infinite-scroll-pagination-component-using-graphql-and-vuejs/infinite-scroll-component-2/infiniteScroll.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sebastian/Code/8base/tutorials/infinite-scroll-pagination-component-using-graphql-and-vuejs/infinite-scroll-component-2/infiniteScroll.vue","mtime":1574273154907},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KCi8qIEltcG9ydHMgdGhlIGdyYXBoUUwgcmVxdWVzdCBjbGllbnQgKi8KaW1wb3J0IHsgR3JhcGhRTENsaWVudCB9IGZyb20gImdyYXBocWwtcmVxdWVzdCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgLyoqCiAgICogRGVjbGFyZSB0aGUgcHJvcHMgZXhwZWN0ZWQgdG8gYmUgcGFzc2VkIGZyb20KICAgKiBhbnkgcGFyZW50IGNvbXBvbmVudCAodGhlIG9uZXMgaW4gRGV2LnZ1ZSkuCiAgICovCiAgcHJvcHM6IHsKICAgIHF1ZXJ5OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICByZXNwS2V5OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICBsaW1pdDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDI1CiAgICB9LAogICAgZW5kcG9pbnQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGF1dGhUb2tlbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLyogVGhlIGFycmF5IGZvciBzdG9yaW5nIGFsbCByZWNvcmRzIGZldGNoZWQgKi8KICAgICAgaXRlbXM6IFtdLAogICAgICAvKioKICAgICAgICogQ29uZmlndXJlIHRoZSBHcmFwaFFMIENsaWVudCwgc2V0dGluZyBoZWFkZXJzCiAgICAgICAqIG9ubHkgaWYgdGhlIGF1dGhUb2tlbmlzIHNwZWNpZmllZC4KICAgICAgICovCiAgICAgIGNsaWVudDogbmV3IEdyYXBoUUxDbGllbnQoCiAgICAgICAgdGhpcy5lbmRwb2ludCwKICAgICAgICB0aGlzLmF1dGhUb2tlbgogICAgICAgICAgPyB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXV0aFRva2VufWAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIDogbnVsbAogICAgICApCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgICAgcmVzcEtleVBhcnNlcigpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnJlc3BLZXkuc3BsaXQoJy4nKQogICAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIENhbGxiYWNrIGZvciB0aGUgb25zY3JvbGwgZXZlbnQgY2hlY2tzIHdoZXRoZXIgdGhlIHNjcm9sbCBwb3NpdGlvbgogICAgICogaXMgbmVhciB0aGUgYm90dG9tIG9mIHRoZSBzY3JvbGwgY29udGFpbmVyLgogICAgICovCiAgICBoYW5kbGVTY3JvbGwoeyB0YXJnZXQ6IHsgc2Nyb2xsVG9wLCBjbGllbnRIZWlnaHQsIHNjcm9sbEhlaWdodCB9IH0pIHsKICAgICAgaWYgKHNjcm9sbFRvcCArIGNsaWVudEhlaWdodCA+PSBzY3JvbGxIZWlnaHQpIHRoaXMubG9hZEJhdGNoKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiBXaGVuIGEgbmV3IGJhdGNoIG9mIGFydGljbGVzIGFyZSByZXRyaWV2ZWQgZnJvbSB0aGUgQVBJLAogICAgICogYWRkIHRoZW0gdG8gdGhlIGl0ZW1zLgogICAgICovCiAgICBoYW5kbGVMb2FkKHJlc3BvbnNlKSB7CiAgICAgIGlmICh0aGlzLnJlc3BLZXkpIHsKICAgICAgICAgIHJlc3BvbnNlID0gdGhpcy5yZXNwS2V5UGFyc2VyLnJlZHVjZSgobywgdikgPT4gb1t2XSwgcmVzcG9uc2UpCiAgICAgIH0KICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuY29uY2F0KHJlc3BvbnNlKTsKICAgIH0sCiAgICAvKioKICAgICAqIFVzZSB0aGUgY2xpZW50IHRvIHNlbmQgcXVlcnkgdG8gR3JhcGhRTCBBUEkKICAgICAqIHdpdGggdGhlIG5lZWRlZCB2YXJpYWJsZXMsICdsaW1pdCcgYW5kICdza2lwJy4KICAgICAqLwogICAgbG9hZEJhdGNoKCkgewogICAgICB0aGlzLmNsaWVudAogICAgICAgIC5yZXF1ZXN0KHRoaXMucXVlcnksIHsKICAgICAgICAgIGxpbWl0OiB0aGlzLmxpbWl0LAogICAgICAgICAgc2tpcDogdGhpcy5pdGVtcy5sZW5ndGgKICAgICAgICB9KQogICAgICAgIC50aGVuKHRoaXMuaGFuZGxlTG9hZCkKICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7CiAgICB9CiAgfSwKICAvKioKICAgKiBXaGVuIHRoZSBjb21wb25lbnQgbW91bnRzIChmaXJzdCByZW5kZXJzKSwgbG9hZCB0aGUKICAgKiBpbml0aWFsIGJhdGNoIG9mIHBvc3RzLgogICAqLwogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRCYXRjaCgpOwogIH0KfTsK"},{"version":3,"sources":["infiniteScroll.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"infiniteScroll.vue","sourceRoot":"..","sourcesContent":["<style scoped>\n/**\n * Some of the styling is functional, while other\n * is aesthetic. Feel free to play with it!\n */\nsection {\n  overflow-y: scroll;\n  height: 500px;\n}\n</style>\n\n<template>\n  <!-- \n    Component container with scroll event listener\n    for triggering handle scroll event.\n  -->\n  <section @scroll=\"handleScroll\">\n    <!--\n      For every item in the items array, render\n      the slotted template and bind the item data.\n     -->\n    <slot v-for=\"item in items\" v-bind=\"item\" />\n  </section>\n</template>\n\n<script>\n/* eslint-disable no-console */\n\n/* Imports the graphQL request client */\nimport { GraphQLClient } from \"graphql-request\";\n\nexport default {\n  /**\n   * Declare the props expected to be passed from\n   * any parent component (the ones in Dev.vue).\n   */\n  props: {\n    query: {\n      type: String,\n      required: true\n    },\n    respKey: {\n      type: String,\n      default: \"\"\n    },\n    limit: {\n      type: Number,\n      default: 25\n    },\n    endpoint: {\n      type: String,\n      required: true\n    },\n    authToken: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data() {\n    return {\n      /* The array for storing all records fetched */\n      items: [],\n      /**\n       * Configure the GraphQL Client, setting headers\n       * only if the authTokenis specified.\n       */\n      client: new GraphQLClient(\n        this.endpoint,\n        this.authToken\n          ? {\n              headers: {\n                authorization: `Bearer ${this.authToken}`\n              }\n            }\n          : null\n      )\n    };\n  },\n  computed: {\n      respKeyParser() {\n          return this.respKey.split('.')\n      }\n  },\n  methods: {\n    /**\n     * Callback for the onscroll event checks whether the scroll position\n     * is near the bottom of the scroll container.\n     */\n    handleScroll({ target: { scrollTop, clientHeight, scrollHeight } }) {\n      if (scrollTop + clientHeight >= scrollHeight) this.loadBatch();\n    },\n    /**\n     * When a new batch of articles are retrieved from the API,\n     * add them to the items.\n     */\n    handleLoad(response) {\n      if (this.respKey) {\n          response = this.respKeyParser.reduce((o, v) => o[v], response)\n      }\n      this.items = this.items.concat(response);\n    },\n    /**\n     * Use the client to send query to GraphQL API\n     * with the needed variables, 'limit' and 'skip'.\n     */\n    loadBatch() {\n      this.client\n        .request(this.query, {\n          limit: this.limit,\n          skip: this.items.length\n        })\n        .then(this.handleLoad)\n        .catch(console.error);\n    }\n  },\n  /**\n   * When the component mounts (first renders), load the\n   * initial batch of posts.\n   */\n  mounted() {\n    this.loadBatch();\n  }\n};\n</script>\n"]}]}